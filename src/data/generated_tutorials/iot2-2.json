{
  "title": "2",
  "slug": "iot2-2",
  "description": "Module from iot2.pdf: 2",
  "tags": [
    "iot2",
    "Elite"
  ],
  "content": "# 2\n\n\nDesign Principles for \n\nConnected Devices \n\nLearning Objectives \n\nLO 2.1 \nSummarise recent initiatives of international organisations for design standardisation \nof IoT/M2M architectural layers and domains \nLO 2.2 \nExplain wireless and wired communication technologies for physical cum data-link \nlayer functions \nLO 2.3 \nList functions of data-adaptation layer, and the device and gateway domain \nLO 2.4 \nDiscuss ease of designing and affordability of IoT devices \n\nRecall from Previous Chapter \n\nThings refer to physical objects, sensors, machines, devices, controllers and intelligent edge-nodes \nin the IoT (Equation 1.1). Connected devices refer to devices such as streetlights, RFIDs, ATMs and \nautomobiles, which are connected to the internet for applications, services and processes. \n\nSection 1.2 described reference Equations 1.1 to 1.3. The section also described conceptual \nmain entities framework, reference model and reference architecture for IoT and M2M. \nFramework refers to a set of entities or software components which make provisions for generic \nfunctionalities. These functionalities can be selectively changed by user codes for developing an \napplication. Conceptual framework means an abstraction of a framework. Reference model means \nmain entities conceptualised and the relationships between them. Reference architecture means \nconceptualisation of main entities in a system, their functioning and deployment in the system \nand the processes rendered by the system. \n\nDesign Principles for Connected Devices \n37 \n\n2.1 \nINTRODUCTION \n\nWhen a letter is written then it is written according to a protocol (etiquette). To send a \nletter, it is first put in an envelope, and then the envelope is marked with the receiver\u2019s \naddress at the centre, sender\u2019s address at left hand bottom area, stamp(s) is/are affixed \nat right hand top corner and the type of post is mentioned on top line in the centre. All \nletters are then gathered (stacked) and the stack is sent to the target city. Each action \ntakes place according to a specified protocol at each stage (layer). Similarly, when data is \ntransferred from a sensor, then functional units create a stack for data communication to \nan application or service. \n\nIoT or M2M device data refers to the data meant for communication to an application, \nservice or process. Data also refers to data received by a device for its monitoring or for \nactions at actuator in it. \n\nData stack denotes the data received after the actions at various in-between layers (or \nlevels or domains). Layers in Open Systems Interconnection (OSI) model are Application, \nPresentation, Session, Transport, Network, Data-link and Physical . \n\nActions at the data-adaptation or other layers can be related to data privacy, data \nsecurity, data consolidation, aggregation, compaction and fusion. An action can be a \ngateway action\u2014using one protocol for reception and another one for transmission. \n\nFigures 1.3 to 1.5 showed that a connected device network communicates with the application \nserver or data centre and cloud service. The applications, services and processes run using the \nserver(s) data, notifications, alerts or messages. The data from the devices is gathered, enriched \nand streamed using communication and processing units. \n\nOracle reference architecture (Figure 1.5) based on Equation 1.2, showed that the things \ncommunicate with the managing, acquiring, organising and analysing units at the Internet. \nThese enable running the applications and the processes. \n\nThe IBM conceptual framework, shown in Figure 1.3, consists of two sub-frameworks. The \ndata from the devices gather, enrich and stream using communication and processing units. \n\nApplications and processes in IoT need that the things communicate with the managing, \nacquiring, organising and analysing units at the Internet (Equation 1.2). Examples of things are \nthe sensors, machines, devices, controllers and intelligent edge nodes of different types. \n\nFigure 1.4 showed seven levels in IoT reference model. CISCO designed model has devices \nand other objects at the lowest level 1. The device data communication and processing units are \nat next level 2. The communication and processing enable the interconnection of devices to the \nInternet when a system manages, acquires, organises and analyses at higher layers at levels 3 \nto 7. \n\nFigure 1.9 showed three domains\u2014devices and communication, network, and applications \nin an M2M architecture. Figure 1.11 gave an architectural view of cloud-based IoT platform for \na smart home. The figure showed three frameworks for a smart-home things system; cloud, \nVPN and video network; and service provider infrastructure. Figure 1.12 showed a four-layer \narchitectural framework which has been developed at CISCO for a smart city. \n\n38 \nInternet of Things: Architecture and Design Principles \n\nThe actions at a layer can be adding additional header after appropriate data formatting \nor transformation at functional units. For example, data from a device can be used by \nan application or in-between layers when a header (specifying device ID or address, \ndestination addresses and other fields) adds and encrypts at the physical (device) layer \nfor its security on the network. \n\nActions besides appending a header can be of appending the additional bits at the various \nin-between units. For example, appending additional message( s) or an acknowledgement . \n\nFollowing are the key terms which need to be understood to learn the design principles \nof connected devices for IoTs: \n\nLayer refers to a stage during a set of actions at which the action is taken as per a specific \nprotocol or method, and then the result passes to the next layer until the set of actions \ncomplete. A layer may consist of various sublayers . \n\nPhysical layer refers to a layer at transmitting-node or at the receiving node for the data \nbits. The transfer uses physical systems and refers to wireless or wired transmission. This \nlayer is the lowest layer. \n\nApplication layer refers to a layer for transmitting or receiving the data bits of an application. \nData bits route across the network and transfer takes place as follows: application data \nfrom the application layer transfers after passing through several in-between layers to the \nphysical layer, and from there it transmits to the receiving-end physical layer. Then, the \ndata at the receiving node transfers from the physical layer to the application layer after \npassing through several in-between layers. \n\nLevel refers to a stage from the lowest to the highest. For example, acquiring device data \nand actions that may be considered at the lowest level and actions in business processes \nat the highest level. \n\nDomain refers to a set of software, layers or levels having specific applications and \ncapabilities. For example, CoRE network, access network, service capabilities and \napplications can be considered as one domain, say, network domain. A domain generally \nhas limited interactions with other domains or outside the domain. \n\nGateway refers to software for connecting two application layers, one at the sender \nand the  other at the receiver [application layer gateway (ALG)]. A gateway may be of \ndifferent types. A communication gateway at device and gateway domain has capabilities \nas protocol-conversion during communication between two ends when each end uses \ndistinct protocols. An Internet gateway may have capabilities besides protocol conversion, \ntranscoding data, device management and data-enrichment before the data communicate \nover the Internet. Dictionary meaning of gateway is a place you go through because it \nleads to a much larger place (Section 2.4). \n\nIP stands for Internet Protocol version 6 (IPv6) or Internet Protocol version 4 (IPv4) for the \nnetwork layer (v6 means version 6, v4 version 4). \n\nHeader means a set of octets containing information about the data being sent. Header \npacks the data of a layer before transmission to the next layer during communication \n\nDesign Principles for Connected Devices \n39 \n\nbetween two end-points. The size of a header and its fields are according to the protocol \nused for creating data stack at a layer. For example, IPv4 header has fields as per IP \nnetwork layer, Universal Datagram Protocol (UDP) header as per UDP at the transport \nlayer and so on. Each header field has distinct meanings. The field size can be between 1 \nand 32-bit in a packet. A field helps in processing the packet when transferring it from one \nlayer to the next one. \n\nPacket means packaged data-stack which routes over the network. Packet size limit is \naccording to the protocol. For example, IPv4 packet size limit is 2 16 B (2 14 words with \n1 word = 4 octet). \n\nProtocol Data Unit (PDU) is a unit of data which is specified in a protocol of a given layer \nwhich transfers from one layer to another. For example, PDU is bit which transfers from \nphysical layer; frame from data-link layer; packet from network layer; segment from transport \nlayer and text (plain, encrypted or compressed) from application and other layers. \n\nMaximum Transmission Unit (MTU) is the largest size frame or packet or segment specified \nin octets (1 octet = 1 byte = 8 bits) that can be sent in a packet or frame-based network such \nas the Internet. For example, consider transfers of a segment from the transport layer \nusing the Transmission Control Protocol (TCP) to the network layer. The MTU determines \nthe maximum size of each data stack in any transfer to the network layer. The network \nlayer determines the maximum size of each frame in any transfer to the data-link layer and \nthen uses MTU of the data-link layer. \n\nStar network denotes the number of nodes interacting with a coordinator or master node. \n\nMesh network denotes the number of nodes that may interconnect with each other. \n\nEnd-point device or node denotes the one that provides connectivity to a coordinator or \nrouter. \n\nCoordinator denotes the one that connects to a number of end-points as well as routers in a \nstar topology and forwards the data stack from one attached end point/router to another. \n\nMaster refers to the one who initiates the pairing with the devices in a star topology \nnetwork. \n\nSlave means one that pairs with a master, uses the clock signals from master for \nsynchronisation and uses address assigned by the master at the beginning. \n\nRouter refers to a device or node capable of storing paths to each destination to which it \nhas logical links. The router sends the data stack according to the available path or paths \nat a receiving instance. \n\nISM band means Industrial, Scientific and Medical (ISM) radio frequency (RF) bands. \n2.4 GHz and the frequencies are 915 MHz for North America, 868 MHz for Europe and \n433 MHz band for Asia in ISM bands. \n\nApplication means software for specific tasks, such as streetlight monitoring or control. \n\n\n![Image](/src/assets/generated_images/iot2_p66_i0.png)\n40 \nInternet of Things: Architecture and Design Principles \n\nService means service software, for example, report generation or chart visualisation \nservice. \n\nProcess means a software component, which processes the input and generates the output; \nfor example after analysing the data or acquiring the data. An operating system controls a \nprocess, memory for the process and other parameters of the process. \n\nSuggested models, conceptual frameworks, reference models and architectures for the \nIoT/M2M suggest the following: \n\n\u25cf Need of designing a communication framework for connecting devices, for their local \narea networking and provisions for data gathering. \n\n\u25cf Need of designing a data enrichment, data consolidation and data transformation \nframework. \n\n\u25cf Need of designing gateway components for connecting the device\u2019s network with the \nweb/Internet. \n\n\u25cf Need of application and applications-support frameworks for services, applications \nand processes. \nThis chapter describes the physical cum data-link and data-adaptation layers, which \ncommunicate with the network layer. This chapter also describes communication \nframeworks for connecting devices, local area networks and applications. Subsequent \nchapters will describe the gateway components for connecting device networks with the \nweb/Internet, application and application-support frameworks. \n\nFollowing sections describe design principles for connected devices. They describe \nstandardised layers in an IoT system, communication frameworks, and wireless and \nwired technologies for connectivity framework in the devices and network domain. \nFollowing sections also describe the frameworks for communication, data management \nand data enrichment. \n\n2.2 \nIoT/M2M SYSTEMS, LAYERS AND \nDESIGNS STANDARDISATION \n\nA number of international organisations have taken action for \nIoT design standardisation. Following are the examples: \n\nInternet Engineering Task Force (IETF), an international \nbody initiated actions for addressing and working on \nthe recommendations for the engineering specifications for the Internet of Things. \nIETF suggests the specifications for the layers, and the engineering aspects for the IoT \ncommunication, networks and applications. \n\nInternational Telecommunication Union for Telecommunication (ITU-T) suggested a \nreference model for IoT domain, network and transport capabilities for the IoT services \nand the applications at the application and application-support layers. \n\nEuropean Telecommunication Standards Institute (ETSI) initiated the development of \na set of standards for the network , and devices and gateway domains for the communication \n\nSummarise \nrecent initiatives \n\nof international \norganisations for design \n\nstandardisation of IoT/ \n\nM2M architectural \nlayers and domains \n\nLO 2.1 \n\nDesign Principles for Connected Devices \n41 \n\nbetween machines (M2M). ETSI proposed high-level architecture for applications and \nservice capabilities. \n\nOpen Geospatial Consortium (OGC), an International Industry Consortium, has also \nsuggested open standards for sensors\u2019 discovery, capabilities, quality and other aspects \nwith support to geographical information web support. 1, 2 \n\nFollowing subsections describe these standardisation efforts. \n\n2.2.1 \nModified OSI Model for the IoT/M2M Systems \n\nOSI protocols mean a family of information exchange standards developed jointly by \nthe ISO and the ITU-T. The seven-layer OSI model is a standard model. It gives the basic \noutline for designing a communication network. Various models for data interchanges \nconsider the layers specified by the OSI model, and modify it for simplicity according to \nthe requirement. Similarly, IETF suggests modifications in the OSI model for the IoT/M2M. \n\nFigure 2.1 shows a classical seven-layer OSI model (on the left) and the modifications \nin that model proposed by IETF (in the middle). Data communicates from device end \nto application end. Each layer processes the received data and creates a new data stack \nwhich transfers it to the next layer. The processing takes place at the in-between layers, i.e. \nbetween the bottom functional-layer to the top layer. Device end also receives data from \nan application/service after processing at the in-between layers. Figure 2.1 also shows a \nsimilarity with the conceptual framework in Equation 1.2: \n\nGather + Enrich + Stream + (Manage + Acquire + Organise +Analyse) = IoT Applications \nand Services \n\nLayer 7 - Application \nApplication \n= IoT Applications \nand Services \n\n+ Manage \n+ Acquire \n+ Organise and \n\nAnalyse \n\n+ Stream \n\n+ Enrich \n\nGather \n\nApplication-Support \n\nTransport \n\nNetwork \n\nData Adaption \n\nPhysical cum Data-link Layer \n\nLayer 6 - Presentation \n\nLayer 5 - Session \n\nLayer 4 - Transport \n\nLayer 3 - Network \n\nLayer 2 - Data-link \n\nLayer 1 - Physical \n\nFigure 2.1 Seven-layer generalised OSI model (on left) and IETF six layer modified OSI model for IoT/ \n\nM2M (in the middle), and similarity with the conceptual framework Equation 1.2 (on right) \nfor IoT applications and services \n\n1 H\u00f6ller Jan et al., Machine-to-Machine to the Internet of Things , pp. 163-165, Elsevier, 2014 \n2 http://www.opengeospatial.org/projects/groups/sensorwebdwg. \n\n42 \nInternet of Things: Architecture and Design Principles \n\nNew applications and services are present at the application layer 6. A modification \nto this is that the application-support layer 5 uses protocols, such as CoAP. (Section \n3.1.1). IoT  applications and services commonly use them for network communication. \nThe CoAP protocol at the layer is used for the request/response interactions between the \nclient and server at the network. Similarly, the application-support layer may include \nprocesses for data managing, acquiring, organising and analysing which are mostly used \nby applications and services. \n\nModifications are also at the data-link layer 2 (L2) and physical layer 1 (L1). The new \nlayers are data-adaptation (new L2) and physical cum data-link (new L1). The data- \nadaptation layer includes a gateway. The gateway enables communication between the \ndevices network and the web. \n\nA physical IoT/M2M device hardware may integrate a wireless transceiver using a \ncommunication protocol as well as a data-link protocol for linking the data stacks of L1 \nand L2. \n\nExample 2.1 explains the IETF six-layer OSI model for Internet of streetlights. \n\nExample 2.1 \n\nProblem \nWhat are the architectural layers in a modified OSI model for Internet of smart streetlights application in \nExample 1.1? \n\nSolution \n\nConsider a model for Internet of streetlights (Figure 1.1). Following are the layers for data interchange in \nthe modified OSI model: \n\n\u25cf L1: It consists of smart sensing and data-link circuits with each streetlight transferring the sensed data \nto L2. \n\n\u25cf L2: It consists of a group-controller which receives data of each group through Bluetooth or ZigBee, \naggregates and compacts the data for communication to the Internet, and controls the group streetlights \nas per the program commands from a central station. \n\n\u25cf L3: It communicates a network stream on the Internet to the next layer. \n\n\u25cf L4: The transport layer does device identity management, identity registry and data routing to the next \nlayer \n\n\u25cf L5: The application-support layer does data managing, acquiring, organising and analysing, and \nfunctionalities of standard protocols such as CoAP, UDP and IP. \n\n\u25cf L6: The application layer enables remote programming and issue of central station directions to switch \non-off and commands of services to the controllers along with monitoring each group of streetlights \nin the whole city. \n\n2.2.2 \nITU-T Reference Model \n\nFigure 2.2 shows the ITU-T reference model RM1. It also shows correspondence of the \nmodel with the six-layers modified OSI model (Figure 2.1). The figure also shows a \ncomparison with CISCO IoT reference model RM2 (Figure 1.4). RM1 considers four layers \nwhich are: \n\nDesign Principles for Connected Devices \n43 \n\n\u25cf Lowest layer , L1, is the device layer and has device and gateway capabilities. \n\n\u25cf Next layer, L2, has transport and network capabilities. \n\n\u25cf Next layer, L3, is the services and application-support layer. The support layer has two \ntypes of capabilities\u2014generic and specific service or application-support capabilities. \n\n\u25cf Top layer , L4, is for applications and services. \nITU-T recommends four layers, each with different capabilities. A comparison of ITU-T \nRM1 with the six-layer OSI model can be made as follows: \n\n\u25cf RM1 device layer capabilities are similar to data-adaptation and physical cum data- \nlink layers. \n\n\u25cf RM1 network layer capabilities are similar to transport and network layers. \n\n\u25cf RM1 upper two layer capabilities are similar to top two layers. \nA comparison with the CISCO IoT reference model (RM2) can be made as follows: \n\n\u25cf RM1 L4 capabilities are similar to RM2 collaborations and processes, and application \ntop two levels. \n\n\u25cf RM1 L3 capabilities are similar to RM2 three middle-level functions of data abstraction, \naccumulation, analysis and transformation. \n\n\u25cf RM1 L2 layer capabilities are similar to RM2 functions at connectivity level. \n\n\u25cf RM1 L1 device layer capabilities are similar to RM2 functions at physical devices level. \n\nApplication \n\nNetwork \n\nApplication (Services and Applications) (L4) \n\nServices and Application-Support Layer \n(Generic and Specific Support Capabilities) (L3) \n\nData Abstraction \n\nApplication \n\nData Accumulation \n\nConnectivity \nNetwork Layer (Transport and Network Capabilities) (L2) \n\nDevice Layer (Device and Gateway Capabilities) (L2) \nPhysical cum \nData-link \nLayer \n\nData \nAdaptation \n\nTransport \n\nApplication \nSupport \n\nPhysical Devices \n\nCollaborations and \nProcesses \n\nData Element Analysis \nand Transformation \n\nFigure 2.2 ITU-T reference model RM1, its correspondence with six layers of modified OSI and a \n\ncomparison with seven levels suggested in CISCO IoT reference model RM2 \n\n44 \nInternet of Things: Architecture and Design Principles \n\nExample 2.2 explains ITU-T reference model for Internet of RFIDs. \n\nExample 2.2 \n\nProblem \nWhat are the architectural layers in ITU-T reference model for Internet of RFIDs application? \n\nSolution \n\nConsider a model for Internet of RFIDs. Following are the capabilities of the layers and data interchange in \nthe ITU-T reference model. \nLayer 1: Device and gateway capabilities are present in the RFID physical device cum RFID reader which \nacquires the ID data, and communicates the enriched data according to a wireless protocol to an access \npoint (AP). \nLayer 2: Transport and network capabilities are present at access network consisting of APs and Internet \nconnectivity to servers. \nLayer 3: Services and application-support layer capabilities at server are RFID device\u2019s registry, ID \nmanagement, RFIDs data routing to server or data centre, data analysis for the time-series device presence \nand device tracked positions. \nLayer 4: Services and applications of RFIDs are tracking, inventory control of goods and business processes; \nfor example, supply-chain management. \n\n2.2.3 ETSI M2M Domains and High-level Capabilities \n\nA domain specifies the functional areas. High-level architecture means architecture for \nfunctional and structural views. Figure 2.3 shows ETSI M2M domains and architecture, \nand the high-level capabilities of each domain. It also shows that the architecture \ncorrespondences with the six-layer modified OSI model as well as the four layers of the \nITU-T reference model. \nThe ETSI network domain has six capabilities and functions: \n\n1. M2M applications \n2. M2M service capabilities \n3. M2M management functions \n4. Network management functions \n5. CoRE network (for example, 3G and IP networks, network control functions, \n\ninterconnections among networks) \n6. Access network (for example, LPWAN (low power wide area network), WLAN \n\n(Wi-Fi) and WiMax networks) \nThe ETSI device and gateway domain has the following functional units: \n\n\u25cf Gateway between M2M area network, and CoRE and access network, possessing \nM2M service capabilities and applications \n\n\u25cf M2M area network (for example, Bluetooth, ZigBee NFC, PAN, LAN) \n\n\u25cf M2M devices \nExample 2.3 explains M2M ETSI domains and high-level architecture for applications and \nservices ATMs-to-bank servers. \n\nDesign Principles for Connected Devices \n45 \n\nApplication and \nNetwork \nDomain \n(Applications, \nManagement, \nService \nCapabilities, and \nCore and Access \nNetworks) \n\nDevice and Gateway \nDomain [Gateway \n(M2M Service \nCapabilities, \nApplications), M2M \nArea Network and M2M \nDevices] \n\nApplication \n\nApplication \nSupport \n\nTransport \n\nNetwork \n\nData \nAdaptation \n\nPhysical cum \nData-link \nLayer \n\nApplication (Services \nand Applications) \n\nServices and \nApplication-Support \nLayer (Generic and \nSpecific Support \nCapabilities) \n\nNetwork Layer \n(Transport and \nNetwork capabilities) \n\nDevice Layer \n(Device and Gateway \nCapabilities) \n\nFigure 2.3 ETSI M2M domain architecture and its high-level capabilities, and its correspondences with \n\nsix layers of modified OSI and four layers of ITU-T reference model \n\nExample 2.3 \n\nProblem \nWhat are domains and their service capabilities in ETSI high-level architecture for applications and services \nin Internet of ATM machines? \n\nSolution \n\nETSI high-level architecture for applications and services in Internet of ATM machines has two domains: \n\n\u25cf Device and gateway domain : Device refer to cards and ATMs, while ATM service capabilities and ATM \napplications are present at the ATM gateway. The gateway has system for acquiring the card as well \nas banking data. Data interchange between an ATM machine and the bank server takes place through \nthe gateway. The domain has cash dispensing and surveillance systems. All the ATM systems network \nthrough an access network. The gateway communicates the data after enriching and transcoding \naccording to the network protocol between an AP and data for the machine. A domain subsystem \nmonitors cash dispensing and other services. \n\n\u25cf Applications and network domain: Application and network domain has two functional units\u2014ATM \nmanagement functions and network management functions. It has banking applications and service \ncapabilities for the ATMs. It communicates with the bank CoRE network which connects all the access \nnetworks of ATM gateways. \n\n46 \nInternet of Things: Architecture and Design Principles \n\nReconfirm Your Understanding \n\n\u25cf International organisations IETF, ITU-T and ETSI have recently taken the initiative and \nrecommendations for layers, capabilities, domains and architecture standardisation for IoT/M2M \nsystems. \n\n\u25cf Three proposed international standards, proposed conceptual frameworks, IoT architectures and \nreference models of IBM, Oracle and CISCO have similarities. \n\n\u25cf Architectural layers and domains in IoT/M2M examples\u2014Internet of streetlights, Internet of RFIDs \nand Internet of ATMs\u2014are shown using modified OSI, ITU-T and ETSI standard specifications. \n\n\u25cf The IETF six-layer model proposes an application-support layer in place of a session and presentation \nlayers in the OSI model. CoAP is an application-support layer protocol. CoAP transactions use the \nrequest/response interactions model. \n\n\u25cf The IETF six-layer model has a data-adaptation layer in place of a data-link layer. An adaptation \nlayer protocol is 6LoWPAN [IPv6 over low power wireless personal area networks (WPAN)]. The model \nhas a physical cum data-link layer in place of the physical layer in the OSI. \n\n\u25cf The ITU-T reference model has a layer for applications and services, and three more layers for three \nother types of capabilities. \n\n\u25cf The ETSI high-level M2M architecture has two domains. One is a network domain which has six \ncapabilities and functions. The ETSI device and gateway domain has functional units consisting of \ngateway, CoRE and access network, M2M area network and M2M devices. \n\nS elf-Assessment E xercise \n\n1. Draw the IETF six-layer model for Internet of RFIDs applications for tracking \n\nand inventory control. \n2. Draw the ITU-T reference model for Internet of streetlights. \n3. Draw the proposed ETSI high-level architecture for the ATMs-bank server \n\napplications and services. \n4. How can the functional units in CISCO seven levels be associated with four \n\nlayers in the ITU-T reference model? \n5. Why is a gateway necessary in a communication framework for IoT and M2M \n\napplications and services? \n6. Why is an additional layer for application-support required in IoT/M2M \n\napplications? \n7. How can the functional units in the Oracle IoT architecture be associated with \n\neach of the six layers in the IETF IoT model? \n8. Why does IETF consider it important that the modified OSI specifies physical/ \n\ndata-link and data-adaptation layers in place of separate physical and data- \nlink layers in its model for computer networks? \n9. Draw the ETSI M2M high-level architecture for a traffic management system \n\nfor connected automobiles. Assume that application provisions for the real- \ntime traffic density reports. The reports display in maps at the automobiles. \n\n\u2605 \n\n\u2605 \n\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605\u2605 \n\nNote: \n\u2605 Level 1 & Level 2 category \n\n\u2605\u2605 Level 3 & Level 4 category \n\n\u2605\u2605\u2605 Level 5 & Level 6 category \n\n\n![Image](/src/assets/generated_images/iot2_p73_i0.png)\nDesign Principles for Connected Devices \n47 \n\n2.3 \nCOMMUNICATION TECHNOLOGIES \n\nPhysical cum data-link layer in the model consists of a local \narea network/personal area network. A local network of IoT \nor M2M device deploys one of the two types of technologies\u2014 \nwireless or wired communication technologies. Figure \n2.4 shows connected devices (1 st to i th ) connectivity using \ndifferent technologies for communication of data from and to devices to the local network \nconnectivity to a gateway. \n\nBluetooth (Low Energy), ZigBee IP, NFC, \nRF link (Wireless Technologies), \nand I 2 C, SPI, UART (Wired Technologies) \n\nDevice 1 \n\nDevice 2 \n\nDevice \n( i \u2013 1) \n\nDevice i \n\n10s of Bytes \n\n10s of Bytes \n\n10s of Bytes \n\n10s of Bytes \n\n10s of Bytes \n\nPhysical/Data-link \n\nLayer \n\nIoT or M2M \nArea Local \nNetwork and \nGateway \n\nBluetooth \nSmart IP, \nZigBee IP, \nZigBee NAN, \n6LoWPAN \nRF, NFC, \nLPWAN \nnetwork \nprotocols \n\nFigure 2.4 Connected devices 1 st to i th connected to the local network and gateway using the WPAN or \n\nLPWAN network protocols \n\nFigure 2.4 shows number of devices present in an IoT or M2M \ndevices network. The figure shows the local area network of \ndevices. The connectivity between the devices (left-hand side) is \nby using RF, Bluetooth Smart Energy, ZigBee IP, ZigBee NAN \n(neighbourhood area network), NFC or 6LoWPAN or mobile. \nTens of bytes communicate at an instance between the device and local devices network. \n\nFollowing subsections describe the technologies and standards recommended for the \ncommunication. \n\n2.3.1 \nWireless Communication Technology \n\nPhysical cum data-link layer uses wired or wireless communication technologies. \nExamples of wireless communication technologies are NFC, RFID, ZigBee, \n\nExplain wireless \n\nand wired \ncommunication \ntechnologies for \nphysical cum data-link \n\nlayer functions \n\nLO 2.2 \n\nWireless and wired \n\ntechnologies for \ncommunication of data \n\nfrom and to devices \n\n48 \nInternet of Things: Architecture and Design Principles \n\nBluetooth (BT), RF transceivers and RF modules. Following subsections describe these \nwireless communication technologies. \n\nNear-Field Communication \n\nNear-Field communication (NFC) is an enhancement of ISO/IEC 2 14443 standard for \ncontact-less proximity-card. \n\nNFC is a short distance (20 cm) wireless communication technology. It enables data \nexchange between cards in proximity and other devices. Examples of applications of \nNFC are proximity-card reader/RFID/IoT/M2M/mobile device, mobile payment wallet, \nelectronic keys for car, house, office entry keys and biometric passport readers. \n\nNFC devices transmit and receive data at the same instance and the setup time (time \ntaken to start the communication) is 0.1 s. The device or its reader can generate RF fields \nfor the nearby passive devices such as passive RFID. An NFC device can check RF field and \ndetect collision of transmitted signals. The device can check collision when the received \nsignal bits do not match with the transmitted signal bits. Features of an NFC device are: \n\nRange of functioning is within 10 to 20 cm. The device can also communicate with \nBluetooth and Wi-Fi devices in order to extend the distance from 10 cm to 30 m or higher. \nThe device is able to receive and pass the data to a Bluetooth connection or standardised \nLAN or Wi-Fi using information handover functions. Device data transfer rates are 106 \nkbps, 212 kbps, 424 kbps and 848 kbps (bps stands for bit per second, kbps for kilo bit per \nsecond). Three modes of communication are: \n\n1. Point-to-point (P2P) mode: Both devices use the active devices in which RF fields \n\nalternately generate when communicating. \n2. Card-emulation mode: Communication without interruption for the read and write \n\nas required in a smart card and smart card reader. FeliCa \u2122 and Mifare \u2122 standards \nare protocols for reading and writing data on the card device and reader, and then \nthe reader can transfer information to Bluetooth or LAN. \n3. Reader mode: Using NFC the device reads passive RFID device. The RF field is \n\ngenerated by an active NFC device. This enables the passive device to communicate. \n\nRFID \n\nRadio Frequency Identification (RFID) is an automatic identification method. RFIDs use \nthe Internet. RFID usage is, therefore, in remote storage and retrieval of data is done at the \nRFID tags. An RFID device functions as a tag or label, which may be placed on an object. \nThe object can then be tracked for the movements. The object may be a parcel, person, \nbird or an animal. IoT applications of RFID are in business processes, such as parcels \ntracking and inventory control, sales log-ins and supply-chain management. Section 7.5.1 \ndescribes the details of the technology. \n\n2 ISO stands for International Organization for Standardization and IEC stands for International Electrotechnical Commis- \nsion. \n\nDesign Principles for Connected Devices \n49 \n\nBluetooth BR/EDR and Bluetooth Low Energy \n\nBluetooth devices follow IEEE 802.15.1 standard protocol for L1 (physical cum data-link \nlayer). BT devices form a WPAN devices network. Two types of modes for the devices \nare Bluetooth BR/EDR (Basic Rate 1 Mbps/Enhanced Data Rate 2 Mbps and 3 Mbps) and \nBluetooth low energy (BT LE 1Mbps). A latest version is Bluetooth v4.2. BT LE is also \ncalled Bluetooth Smart . Bluetooth v4.2 (December 2014) provides the LE data packet length \nextension, link layer privacy and secure connections, extended scanner and filter link \nlayer policies and IPSP. BT LE range is 150 m at 10 mW power output, data transfer rate is \n1 Mbps and setup time is less than 6 s. \n\nBluetooth v5, released in June 2016, has increased the broadcast capacity by 800%, \nquadrupled the range and doubled the speed. \n\nA device may have provisions for single mode BT LE or dual mode BT BR/EDR (Mbps \nstands for Million Bits per second). Its features are: \n\n\u25cf Auto-synchronisation between mobile and other devices when both use BT. BT \nnetwork uses features of self-discovery, self-configuration and self-healing. \n\n\u25cf Radio range depending on class of radio; Class 1 or 2 or radios: 100 m, 10 m or 1 m \nused in device BT implementation. \n\n\u25cf Support to NFC pairing for low latency in pairing the BT devices. \n\n\u25cf Two modes\u2014dual or single mode devices are used for IoT/M2M devices local area \nnetwork. \n\n\u25cf IPv6 connection option for BT Smart with IPSP (Internet Protocol Support Profile). \n\n\u25cf Smaller packets in LE mode. \n\n\u25cf Operation in secured as well as unsecured modes (devices can opt for both link-level \nas well as service-level security or just service level or unsecured level). \n\n\u25cf AES-CCM 128 authenticated encryption algorithm for confidentiality and \nauthentication (Refer Example 2.4). \n\n\u25cf Connection of IoT/M2M/mobile devices using BT EDR device to the Internet with \n24 Mbps Wi-Fi 802.11 adaptation layer (AMP: Alternative MAC/PHY layer) or \nBT-enabled wire-bound connection ports or device. MAC stands for media access \ncontrol sublayer at a data-link layer/sublayer. \n\nExample 2.4 \n\nProblem \nHow does the Bluetooth layer provide confidentiality and authorisation? \n\nSolution \n\nA standard algorithm AES (Advanced Encryption Algorithm) based on symmetric 128-bit block data \nencryption and CCM mode\u00a0 (Counter with\u00a0 CBC-MAC) provides the confidentiality and authorisation. CBC \nstands for cryptographic block cipher with a block length of 128 bits. CCM is a method which provisions for \nthe authenticated encryption algorithm for confidentiality and authentication. \n\n50 \nInternet of Things: Architecture and Design Principles \n\nZigBee IP/ZigBee SE 2.0 \n\nZigBee devices follow the IEEE 802.15.4 standard protocol L1 (physical cum data-link \nlayer). ZigBee devices form a WPAN devices network. \n\nZigBee end-point devices form a WPAN of embedded sensors, actuators, appliances, \ncontrollers or medical data systems which connect to the Internet for IoT applications, \nservices and business processes. \n\nZigBee Neighbourhood Area Network (NAN) is a version for a smart grid. ZigBee \nsmart energy version 2.0 has energy management and energy efficiency capabilities using \nan IP network. \nThe features of ZigBee IP are: \n\n\u25cf L1 layer PDU = 127 B \n\n\u25cf Used for low-power, short-range WPAN \n\n\u25cf The device can function in six modes\u2014end point, ZigBee-ZigBee devices router, \nZigBee network coordinator, ZigBee-IP coordinator, ZigBee-IP router and IP host. \n\n\u25cf ZigBee IP enhancement provisions the IPv6 connectivity. A ZigBee IP device is \na Reduced Function Device (RFD). RFD means one that functions for the \u2018sleepy\u2019/ \nbattery-operated device. Sleepy means one that wakes up infrequently, sends data \nand then goes back to sleep. ZigBee IP supports IPv6 network with 6LoWPAN header \ncompression, connection for Internet communication and control of low power \ndevices, TCP/UDP transport layer and TLSv1.2 public key (RSA and ECC) and PSK \ncipher suite for end-to-end security protocol, end-to-end means application layer to \nphysical layer. \n\n\u25cf The ZigBee router uses reactive and proactive protocols for routing mode, which \nenable applications in big-scale automation and remote controls. \n\n\u25cf A self-configuring and self-healing dynamic pairing mesh network, supports both \nmulticast and unicast options. \n\n\u25cf Multicast forwarding to support multicast Domain Name System (mDNS) based \nservice discovery (SD) \n\n\u25cf Support to development of discovery mechanism with full application confirmation \n\n\u25cf Support to pairing of coordinator with end-point devices and routers in star topology \n\n\u25cf Provides bigger network using multiple star topology and inter-PAN communications \n\n\u25cf Support to sensor nodes and sensor (or appliances) network integration, sensor and \nappliances devices configured as router or end-devices \n\n\u25cf Low latency (< 10 ms) link layer connection \n\n\u25cf Range is 10\u2013200 m, data transfer rate is 250 kbps, low power operation \n\n\u25cf ISM band frequencies direct sequence spread spectrum 16-channel radio, and provide \nlink level security using AES-CCM-128 (Example 2.4) \n\n\u25cf Includes RFD in ZigBee SE 2.0 \nZigBee NAN is for devices which are used for smart-metering, distribution automation \ndevices and smart grid communication profile. NAN enables a utility\u2019s last-mile at HAN \n(Home Area Network), outdoor access network that connects smart meters to WAN (wide- \narea network) gateways. \n\nDesign Principles for Connected Devices \n51 \n\nFigure 2.5 shows ZigBee End Point, Coordinator, Router, ZigBee IP Router modes \nforming star, mesh and IP networks of ZigBee sensors, end devices and ZigBee router \ndevice which interconnect to Internet IPv4, IPv6 and to cellular networks. \n\nFigure 2.5 shows: \n\n\u25cf Three end devices, two routers, one sensor node connected to coordinator ZigBee \ndevices forming a star network. \n\n\u25cf One end device, two routers and one coordinator forming a mesh network. \n\n\u25cf Mesh network router connects to an AP/gateway, which in turn connects to a cellular \nnetwork. \n\n\u25cf Coordinator of mesh network connects to ZigBee IP border router, which enables local \nZigBee networks\u2019 connectivity to the Internet. \n\nCellular \nNetwork \n\nEnd Device 4 \nRouter \n\nRouter \nMesh Network \nCoordinator \n\nAccess \n\nPoint/ \nGateway \n1000s of Bytes \nIPv4 Network \n\nApplication \n\nWeb Objects \n\nSSL/TLS \n\nTCP \nUDP \nICMP \n\nApplication \n\nSSL/TLS \nND/ \nRPL \n\nUDP \nICMP \nTCP \n\nIPv6 \n\nIPv6 Network \n100s/1000s of Bytes \n\n6LowPAN \n\nZigBee \n\nIP \nBorder \nRouter \nRouter \nCoordinator \n\nEnd Device 2 \nSensor Node 1 \nEnd Device 1 \n\n127 Bytes \n\nIEEE 802.15.4 Devices \n\nEnd Device 3 \n\nStar Network \n\nPhysical/Data-link Layer \nData-Adaptation Layer \n\nFigure 2.5 ZigBee end point, coordinator, router, ZigBee IP router nodes forming the star, mesh and IP \n\nnetworks of ZigBee sensors, end devices, and ZigBee router devices which interconnect to \nInternet IPv4, IPv6 and cellular networks \nFeatures of a ZigBee network are: \n\n\u25cf A router in star network connects to 6LoWPAN, which connects an IEEE 802.15.4 \ndevices network to IPv6 network. \n\n\u25cf 1000s of byte communicate between the network layer and IoT web objects. \n\n\u25cf 127 B communication between the adaptation layer IEEE 802.15.4 devices at single \ndata transfer. \n\n\u25cf IETF ND (Neighbour Discovery), ROLL (Routing Over Low power Loss Network), \nRPL routing, IPv6/IPv4 network, TCP/UDP/ICMP transport, SSL/TLS security layer \nprotocols for the communication between web object/application and ZigBee devices. \n\n52 \nInternet of Things: Architecture and Design Principles \n\nWi-Fi \n\nWi-Fi is an interface technology that uses IEEE 802.11 protocol and enables the Wireless \nLocal Area Networks (WLANs). Wi-Fi devices connect enterprises, universities and offices \nthrough home AP/public hotspots. Wi-Fi connects distributed WLAN networks using the \nInternet. \n\nAutomobiles, instruments, home networking, sensors, actuators, industrial device \nnodes, computers, tablets, mobiles, printers and many devices have Wi-Fi interface. They \nnetwork using a Wi-Fi network. \n\nWi-Fi is very popular. The issues of Wi-Fi interfaces, APs and routers are higher power \nconsumption, interference and performance degradation. \n\nWi-Fi interfaces connect within themselves or to an AP or wireless router using Wi-Fi \nPCMCIA or PCI card or built-in circuit cards and through the following: \n\n\u25cf Base station (BS) or AP \n\n\u25cf A WLAN transceiver or BS can connect one or many wireless devices simultaneously \nto the Internet. \n\n\u25cf Peer-to-peer nodes without access point: Client devices within Independent Basic \nService Set (IBSS) network can communicate directly with each other. It enables fast \nand easy setting of an 802.11 network. \n\n\u25cf Peer to multipoint nodes with Basic Service Sets (BSSs) using one in-between AP point \nor distributed BSSs connect through multiple APs. \n\n\u25cf Connectivity range of each BSS depends on the range of wireless bridges and antennae \nused and environmental conditions. \n\n\u25cf Each BSS is a Service Set Identifier (SSID). \nFigure 2.6 shows three WLAN networks (BSSs) for sensor device nodes, mobiles, \ntablets, laptops, computers and Internet connectivity of WLAN networks with the IP4 \nnetworks (here dashed lines represent wireless connectivity and solid lines represent \nwired connectivity). \nFigure 2.6 shows the following: \n\n\u25cf Sensor nodes connected to BT with Wi-Fi adaptation, 802.11 interfaces in a WLAN \nnetwork 1 (WLAN1). \n\n\u25cf Tablets, Wi-Fi, computers also connect in WLAN 1 though an AP. \n\n\u25cf AP1 connects to a broadband router 1 and to the IP4 network 2. \n\n\u25cf WLAN1 and WLAN2 function as BSS. \n\n\u25cf WLAN 2 also consists of AP2, Wi-Fi router and other Wi-Fi enabled interfaces. \n\n\u25cf Wi-Fi router connects to multiple Wi-Fi nodes as well as to a broadband router 2. \n\n\u25cf Broadband routers 1 and 2 connect using wires, to IP4 networks and web objects for \nIoT apps, services and processes. \nThe Wi-Fi interfaces, access points, routers features are as follows: \n\n\u25cf Generally used are the 2.4 GHz IEEE 802.11b adapters or 5 GHz (802.11a or 802.11g) \nor 802.11n or other 802.11 series protocols. \n\n\u25cf Interfaces use 2.4 GHz or 5 GHz antenna \n\n\u25cf Offers mobility and roaming \n\nDesign Principles for Connected Devices \n53 \n\nRoaming \nbetween \nne t works 1 \nand 2 \n\nWeb Objects \n\nTCP \nUDP \nICMP \n\nSSL/TLS \n\nApplication \n\nIPv4  Network \n\nWi-Fi \nAccess \n\nPoint \n\nWLAN Network 2 \n\nWLAN   Network 1 \n\nMobile \n\nSensor Node \n\nSensor Node \n\nSensor Node \n\nSensor Node \n\nPhysical/Data-link Layer \n\nWLAN \nNetwork 3 \n\nIPv4  Network \n\nIPv4  Network \n\nPCMCIA \nWi-Fi Card \n\nWi-Fi Wireless \n\nRouter \n\nMobile or \nTablet with \n\n802.11 \nInterface \n\nWi-Fi \nAccess \n\nPoint/ \nGateway \n\nComputer with \nPCI Wi-Fi card \n\nMobile Wi-Fi \n\nInterface \n\nLaptop \nPCMCIA \nWi-Fi Card \n\nComputer with \nPCI Wi-Fi card \nLaptop PCMCIA \n\nWi-Fi Card \nMobile Wi-Fi \n\nBluetooth \nwith 802.11 \n\nAMP \n\nBroadband \n\nRouter \n\nFigure 2.6 Three WLAN networks for sensor device nodes, mobiles, tablets, laptops, computers and \n\nInternet connectivity of WLAN networks with the IP4 networks (Dashed lines show wireless \nconnectivity and solid lines show wired connectivity) \n\n\u25cf Have easy installation simplicity and flexibility \n\n\u25cf Coverage range is 30 m to 125 m \n\n\u25cf Used in a room having the limited-coverage 802.11a which coexists with b, coexists \nwith b and g \n\n\u25cf Uses the 802.11b in wider coverage range because that is unaffected by walls and is \nmeant for hotspots for public usage having range data rate 11 Mbps (802.11b) within \n30 m \n\n\u25cf Uses 802.11g for high data rates up to 54 Mbps, and 802.11n for very high 600 Mbps, \nusing multiple antennas to increase data rates \n\n\u25cf Interoperable with wireless as well as wired infrastructure which ensures compatibility \nand enables easier access and hides complexity when enabling the wireless access to \ndata, media and streams, and applications and services. \n\n\u25cf Provides a dynamic environment of network expendability and scalability. Scalability \nmeans a system can have a large number of smaller interfaces, routers and APs \n\n\u25cf Provides security, integrity and reliability \n\n\u25cf Uses Wireless Protected Access (WPA) and Wired Equivalent Privacy (WEP) security \nsublayers \n\nRF Transceivers and RF Modules \nRF transmitters, receivers, and transceivers are the simplest RF circuits. A transceiver \ntransmits the RF from one end and receives the RF from the other end, but internally has \n\n54 \nInternet of Things: Architecture and Design Principles \n\nan additional circuit, which separates the signals from both ends. An oscillator generates \nRF pulses of required active duty cycle and connects to a transmitter. BT, ZigBee, and Wi- \nFi radios deploy ISM band transceivers, which have comparatively complex circuits. \n\nIoT/M2M applications deploy ISM band RF modules with transceivers or just \ntransmitter or receiver. A number of systems use RF modules for applications needing \nwireless connectivity; for example, security, telemetry, telematics, fleet management, home \nautomation, healthcare, automobiles wireless tire pressure monitors, back-up cameras \nand GPS navigation service, payment wallet, RFID and maintenance. \nRF technology consists of the following elements: \n\n\u25cf RF interface/physical layer, RF signals transmit between the nodes or endpoints, i.e. the \nsensors, actuators, controllers and a gateway where signals are received. Physical layer \nspecifications consist of signal aspects and characteristics, including the frequencies, \nmodulation format, power levels, the transmitting and receiving mode and signalling \nbetween end-point elements. \n\n\u25cf RF network architecture includes the overall system architecture, backhaul, server \nand bidirectional end-devices with radio duty cycling in the applications. Radio duty \ncycling means managing the active intervals, transmission and receiving schedule, \nand time-intervals actions on an event during the active intervals and actions during \nthe inactive (sleep) intervals using the RF Integrated Circuits (RFICs). \n\nGPRS/GSM Cellular Networks-Mobile Internet \n\nAn IoT/M2M communication gateway can access a Wireless Wide Area Network (WWAN). \nThe network access may use a GPRS cellular network or new generation cellular network \nfor Internet access. \n\nA mobile phone provisions for a USB wired port, BT and Wi-Fi connectivity. Wireless \nconnectivity for Internet uses data connectivity using GSM, GPRS, UMTS/LTE and \nWiMax services of a mobile service provider or Wi-Fi using a modem. A phone, generally, \nprovisions for number of sensors also; for example, acceleration, GPS and proximity. \n\nWireless USB \n\nWireless USB is a wireless extension of USB 2.0 and it operates at ultra-wide band (UWB) \n5.1 GHz to 10.6 GHz frequencies. It is for short-range personal area network (high speed \n480 Mbps 3 m or 110 Mbps 10 m channel). FCC recommends a host wire adapter (HWA) \nand a device wire adapter (DWA), which provides wireless USB solution. Wireless USB \nalso supports dual-role devices (DRDs). A device can be a USB device as well as limited \ncapability host. \n\n2.3.2 \nWired Communication Technology \n\nWired communication can be serial asynchronous communication (for example, UART \ninterface) or synchronous serial communication (for example, SPI interface or parallel \n\nDesign Principles for Connected Devices \n55 \n\ninput, output and input-output ports at the devices). Communication can be over a bus \nwhen a number of systems (chips, units, integrated circuits or ports or interfacing circuits) \nconnect through a common set of interconnections. \n\nBus refers to a number of systems connected through a common set of control, address \nand data signals such that the data signals are accepted by the device at destination \naddress only from a source at an instance. Bus signals may be sent in a serial or parallel \nmanner. Communication is between a master at a given instance (sender) and the destined \naddress computer (listener) at an instance. \n\nWired communication can be done using Ethernet IEEE 802.2 bus specifications. A \nMAC sublayer data frame may be according to Ethernet Protocol. Wired communication \ncan also use a USB port, a microUSB or a USB 3.0 adapter. \n\nUART/USART Serial Communication \n\nA Universal Asynchronous Transmitter (UART) enables serial communication \n(transmission) of 8 bits serially with a start bit at the start of transmission of a byte on serial \nTransmitter Data (TxD) output line. Serial means present one after another at successive \ntime intervals. \n\nAsynchronous refers to all bytes in a frame transmit, which can result in variation in \ntime interval spacing or phase differences between successive bytes and in-between wait \ninterval. This is because clock information of transmitter does not transmit along with the \ndata. The receiver clock also does not synchronise with the data. Further, successive set of \nbytes may wait after transmission till an acknowledgement is received from the receiving \nend. \n\nThe intervals of each transmit bit are controlled by a clock. When the clock period is \nT = 0.01 m s, then period for transmission of a byte on TxD = 10 T = 0.1 m s. A byte\u2019s transfer \nrate is 1 MBps. Reciprocal of T in UART is called Baud rate. When an additional bit \nappends between stop bit and last bit of the byte, then T = 0.11 m s. An additional bit can be \nused to identify the received byte on the serial line as the address or data. It can be used \nfor error detection. UART receives the byte at RxD (transmitter data) input line. \n\nAn Universal Synchronous Asynchronous Transmitter (USART) enables serial \ncommunication (transmission) in synchronous as well as asynchronous modes. \n\nSynchronous means all bytes in a frame transmit with equal time spacing or equal \nphase differences. \n\nSerial Peripheral Interface \n\nSerial Peripheral Interface (SPI) is one of the widely used serial synchronous communication \nmethods. Source of serial synchronous output or input is called master when it also controls \nthe synchronising clock information to the receiver. A receiver of serial synchronous input \nor output is called a slave , when along with the serial data it also receives the synchronising \nclock information from the master. Four sets of signals, viz., SCLK, MISO, MOSI, and SS \n(slave select)  are used on four wires. When SS is active, then the device functions as a \nslave. \n\n56 \nInternet of Things: Architecture and Design Principles \n\nMaster Input Slave Output (MISO) and Master Output Slave Input (MOSI) are \nsynchronous serial bits I/Os at the master and slave and IOs are as per synchronising \nclock of the master SCLK. \n\nMOSI is output from master and input at slave and SCLK (clock information or signal) \nis from the master to slave. Slave synchronises and receives the input bits at MOSI from \nthe master as per the SCLK input at slave. \n\nMISO is synchronous serial input at the master for the serial output from slave. Slave \nsynchronises output as per SCLK of the master. Master synchronises the input as per \nSCLK of the master. \n\nI2C Bus \n\nA number of device integrated circuits for sensors, actuators, flash memory and \ntouchscreens need data exchanges in a number of processes. ICs mutually network \nthrough a common synchronous serial bus, called inter-integrated circuit (I2C). Four \npotential modes of operation (viz. master transmit, master receive, slave transmit and \nslave receive) for I2C bus device and generally most devices have a single role and use \ntwo modes only. \n\nThe I2C was originally developed at Philips Semiconductors. There are three I2C bus \nstandards: Industrial 100 kbps I2C, 100 kbps SM I2C and 400 kbps I2C. \n\nI2C bus has two lines that carry the signals\u2014one line is for the clock and one is for \nbidirectional data. I2C bus protocol has specific fields. Each field has a specific number of \nbits, sequences and time intervals between them. \n\nWired USB \n\nUniversal Serial Bus (USB) is for fast serial transmission and reception between the \nhosts, the embedded system and distributed serial devices; for example, like connecting \na keyboard, printer or scanner. USB is a bus between the host system and a number of \ninterconnected peripheral devices. Maximum 127 devices can connect with a host. USB \nstandard provides a fast (up to 12 Mbps) as well as a low-speed (up to 1.5 Mbps) serial \ntransmission and reception between the host and serial devices. Both the host and device \ncan function in a system. \n\nUSB three standards are USB 1.1 (1.5 and 12 Mbps), 2.0 (mini size connector) 480 Mbps, \n3.0 (micro size connector) 5 Gbps and 3.1 (super speed 10 Gbps). \n\nFeatures of a USB are: \nUSB data format and transfer serial signals are Non Return to Zero (NRZI) and the \nclock is encoded by inserting synchronous code (SYNC) field before each packet. The \nreceiver synchronises bit recovery clock continuously. The data transfer is of four \ntypes\u2014controlled data transfer, bulk data transfer, interrupt driven data transfer and \nisosynchronous transfer. \n\nUSB is a polled bus. Polling mode functions as: A host controller regularly polls the \npresence of a device as scheduled by the software. It sends a token packet. The token \nconsists of fields for type, direction, USB device address and device end-point number. \n\nDesign Principles for Connected Devices \n57 \n\nThe device does handshaking through a handshake packet, indicating successful or \nunsuccessful transmission. A CRC field in a data packet permits error detection. \n\nA USB supports three types of pipes\u2014 Stream with no USB-defined protocol is used \nwhen the connection is already established and the data flow starts. Default control is for \nproviding access. Message is for control functions of the device. The host configures each \npipe with the data bandwidth to be used, transfer service type and buffer sizes. \n\nEthernet \n\nEthernet standard is IEEE 802.2 (ISO 8802.2) protocol for local area network of computers, \nworkstations and device LANs. Each frame at a LAN consists of header. Ethernet enables \nthe services of local device nodes, computers, systems and local resources, such as printers, \nhard disk space, software and data. \n\nFeatures of Ethernet network are: \n\n\u25cf Uses passive broadcast medium and is wired connections based \n\n\u25cf Formatting of frame (serially sent bits as PDU of MAC layer) is according to IEEE \n802.2 standard \n\n\u25cf Uses a 48-bit MAC address assigned distinctly to each computer on the LAN \n\n\u25cf Address Resolution Protocol (ARP) resolves a 32 bit IP address at Internet device \nLANs. Each frame at a LAN destination host media address. Reverse Address \nResolution Protocol (RARP) resolves 48 bit destination host media address into 32 bit \nIP addresses for Internet communication. \n\n\u25cf Uses wired bus topology, and transmission speeds are 10 Mbps, 100 Mbps (unshielded \nand shielded wires), 1 Gbps (high-quality coaxial cable), 4 Gbps (in twisted pair wiring \nmode) and 10 Gbps (fiber-optic cables). \n\n\u25cf Uses MAC-based on CSMA/CD (Carrier Sense Multiple Access with Collision \nDetection). The CSMA/CD mode is half-duplex (wired mode) which means transmit \n(Tx) and receive (Rx) signals can be sent on the same wire or data path. Each one \nconnected to a common communication channel in the network listens and if the \nchannel is idle then transmits. If not idle, it waits and tries again. A mode is full-duplex \nin case of optical-fibre-based Ethernet that transmits and receives signals separated on \ndedicated, one-way channels. \n\n\u25cf Uses transmission data stack into frames at MAC layer, and each frame includes a \nheader. The header\u2019s first eight bytes specify a preamble. The preamble is for indicating \nstart of a frame and is used for synchronisation. Then the header has next six bytes\u2019 \ndestination address and then six bytes of the source address. Then next six bytes are \nfor the type field. These are meaningful only for the higher network layers and define \nthe length of the data stack to the next layer. Next, minimum 72 bytes and maximum \n1500 bytes of data follow the length definition. The last 4 bytes are for CRC (Cyclic \nRedundancy Check) for the frame sequence check. \n\n2.3.3 \nCommunication Technologies\u2014A Comparison \n\nTable 2.1 shows a comparison of communication technologies. \n\n58 \nInternet of Things: Architecture and Design Principles \n\nTable 2.1 \nDifferences between NFC, BT LE, ZigBee and WLAN protocols \n\nProperty \nNFC \nBT LE \nZigBee IP \nWLAN 802.11 \n\nIEEE Protocol \n802.15.1 \n802.15.4 \n802.11z \n\nPhysical Layer \n848, 424, \n212, 106 kbps \n\n2.4 GHz (LE-DSSS) \n2.4 GHz or 915 \nMHz, 868 MHz and \n433 MHz DSSS \nMAC layer CSMA/ \nCA \n\n2.4 GHz Two PHY \nlayers \nMAC layer CSMA/CD \n\nData Transfer \nRate \n\n106 kbps \n1 Mbps \n250 kbps (2.4 GHz, \n40 kbps 915 MHz, \n20 kbps 868.3 MHz \n\n11 Mbps/54 Mbps \n\nForm Factor and \nRange \n\n10\u201320 cm \nSmall \nSmall 10 m to \n200 m \n\nBigger \n\nProtocol Stack \nSmall in LE \n127 B \nBigger than WPAN \ndevices \n\nPower Dissipation \nVery low \nLower than ZigBee, \nmuch lower than \nWLAN 802.11 \n\n2 mW Router and \n0.1 mW for end- \ndevice \nMuch lower than \nWLAN 802.11 \n\nMuch Higher than \nZigBee \n\nSet up/ \nConnection/ \nDisconnection \nIntervals \n\n0.1 s \n3s \nConnection time \n< 3 ms \n\n20 ms \nConnection time \n< 10 ms \n\nSecurity \n\u2014 \nAES-CCM-128 \nAES-CCM-128 \nWEP \n\nApplications \nPayment \nwallet, short \ndistance \ncommuni- \ncation \n\nWPAN, IoT/M2M \ndevices, widely \npresent in mobiles \nand tablets and, need \naddition circuit in \nsensors, actuators, \ncontrollers  and IoT \ndevices \n\nWPAN, wider \npresence in \nsensors, actuators, \ncontrollers, \nautomobile and \nmedical electronic \nand IoT devices \nconnectivity using \nIPv6, 6loWPAN, \nROLL, RPL and \nTLSv1.2 \n\nWLAN and WWAN \nnetwork tablet, \ndesktops, mobiles, \ndevices with PCMCIA \ninterface, home \nnetworking, \nEasy IPv4 connectivity \n\nNetwork \nPoint to point \nbetween \nactive and \npassive \ndevices \n\nStar topology, peer- \nto-peer piconet \nexpended by inter- \npiconets data \ntransactions and \nsynchronisation \n\nLow power, mesh \nor peer-to peer \nstar networks \nusing end devices, \ncoordinator, \nrouter, ZigBee IP \nborder router \n\nLAN topology IBSS, \nBSS and distributed \nBSSs for WWLAN \nwidely used for \nInternet connectivity \nof mobiles, tablets, \ndesktops \n\nDesign Principles for Connected Devices \n59 \n\nNetwork \nCharacteristics \n\nP2P mode, \ncard \nemulation \nmode and \nreader mode \nPassive \nneighbour \nactivation \n\nSelf-configuring, self- \nhealing, self-discovery \n\nSelf-configuring, \nself-healing, self- \ndiscovery \n\nScalable, \ninteroperability, \nsecurity, integrity and \nreliability \n\nBroadcast/ \nMulticast/Unicast \n\nUnicast \nUnicast \nUnicast/ \nmulticast \n\nUnicast \n\nReconfirm Your Understanding \n\n\u25cf IoT/M2M devices, RFIDs, sensors, actuators and controllers send mostly 10s of bytes of data. \n\n\u25cf NFC, BT low energy, ZigBee IP, ZigBee NAN, RF transceivers and modules and mobile GPRS/GSM are \nprotocols which can be used for physical transmission of bits from the devices (sensors/actuators/RF \ndevices/IEEE 802.15.4 devices/controllers/nodes) or reception at them. The devices communicate \nmostly 100s of bytes of data at an instance. \n\n\u25cf NFC device range is 10 to 20 cm with data transfer rates as 106 kbps, 212 kbps, 424 kbps and 848 \nkbps \n\n\u25cf NFC device is able to receive and pass data to Bluetooth connection and WLAN 802.11 for information \nhandover functions \n\n\u25cf RFID is a device which an access point identifies by charging the RFID circuit \n\n\u25cf BT LE communicates using 802.15.1 protocol with low power dissipation and short frames in peer- \nto-peer star topology network and data transfer rates is 1 Mbps. \n\n\u25cf ZigBee IP communicates using 802.15.4 protocol in low power dissipation and 127 B data frames, \nand communicates on Internet using 6LoWPAN, IPv6, RPL/ND and TLSv1.2. ZigBee data transfer \nrates are 250 kbps, 40 kbps and 20 kbps. \n\n\u25cf Wi-Fi network uses WLAN IEEE 802.11 protocol. 802.11 a, b, g and n are popularly used. \n\n\u25cf Wi-Fi network functions with high data transfer rates, mobility, flexible, reliability and scalable \nnetwork. Interoperability with wireless as well as wired infrastructure ensures compatibility, enables \neasier access and hides complexity when enabling the wireless access to data, media and streams, \napplications and services. \n\n\u25cf Wireless USB uses UWB (ultra wide band) 5.1 GHz to 10.6 GHz frequencies for short-range personal \narea network (high speed 480 Mbps 3 m or 110 Mbps 10 m channel USB protocol for wireless \ncommunication). \n\n\u25cf UART, SPI, I2C, Ethernet and USB are bus-topology-based serial communication protocols and use \nwired communication. \n\n\n![Image](/src/assets/generated_images/iot2_p86_i0.png)\n60 \nInternet of Things: Architecture and Design Principles \n\nS elf-Assessment E xercise \n\n1. List the characteristics, range, data transfer rates, three operational modes \n\nand two communication modes of NFC communication. \n2. Draw a diagram of RFID devices\u2019 communication to access point. \n3. List the characteristics of BT LE device communication: range, data transfer \n\nrates, dynamic pairing, IPv6 connectivity, latency, security modes, adaptation \nlayer functions and Wi-Fi connectivity. \n4. List communication characteristics: PDU, range, data transfer rates, dynamic \n\npairing and mesh network, IPv6 connectivity, latency, RFD, network \nintegration and security modes of ZigBee IP device. \n5. How do the BT LE and ZigBee IP consume less energy compared to their \n\nclassic versions? \n6. How do the WLAN IEE 802.11 a, b, g and n differ? \n7. List Wi-Fi interface range, data transfer rates, security and flexibility. \n8. Explain when each of the following will be used: NFC, BT LE, ZigBee IP and \n\nWi-Fi. \n9. What are the elements required for RF technology usage in devices? \n10. Compare different USB versions. \n11. How does the functioning of UART, SPI and I2C differ? \n\n\u2605 \n\n\u2605 \n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605 \n\u2605\u2605\u2605 \n\n\u2605 \n\u2605\u2605 \n\u2605\u2605\u2605 \n\nList functions \n\na-adaptation layer, \nand the device and \n\ngateway domain \n\nLO 2.3 \n2.4 \nDATA ENRICHMENT, DATA \nCONSOLIDATION AND DEVICE \nMANAGEMENT AT GATEWAY \n\nA gateway at a data-adaptation layer has several functions. These are data privacy , data \nsecurity , data enrichment , data consolidation, transformation and device management. Figure \n2.7 shows IoT or M2M gateway consisting of data enrichment, consolidation and device \nmanagement, and communication frameworks (Figure 1.3). \n\nRecall ITU-T reference model (Figure 2.2). The model\u2019s lowest layer is the device layer. \nThis layer has device and gateway capabilities. Also, recall device and gateway domain \n(Figure 2.3) in ETSI IoT architecture. The domain consists of a gateway between M2M \narea network and CoRE and access network. A gateway consists of the data enrichment, \nconsolidation and IoT communication frameworks. The communication gateway enables \nthe devices to communicate and network with the web. The communication gateway \n(Section 3.3.1) uses message transport protocols and web communication protocols for the \nInternet. Chapter 3 describes these protocols. \n\nThe gateway includes two functions viz. data management and consolidation, and \nconnected device management. \n\nThe following subsections describe the framework for data enrichment and \nconsolidation. \n\nDesign Principles for Connected Devices \n61 \n\n2.4.1 Data Management and Consolidation Gateway \n\nGateway includes the provisions for one or more of the following functions: transcoding \nand data management. Following are data management and consolidation functions: \n\n\u25cf Transcoding \n\n\u25cf Privacy, security \n\n\u25cf Integration \n\n\u25cf Compaction and fusion \n\nTranscoding \n\nTranscoding means data adaptation, conversion and change of protocol, format or code \nusing software. The gateway renders the web response and messages in formats and \nrepresentations required and acceptable at an IoT device. Similarly, the IoT device requests \nare adapted, converted and changed into required formats acceptable at the server by the \ntranscoding software. \n\nFor example, use of transcoding enables the message request characters to be in ASCII \nformat at the device and in Unicode at the server. It also enables the use of XML format \ndatabase at the device, while the server has a DB2, Oracle or any other database. \n\nTranscoding involves formats, data and code conversion from one end to another \nwhen the multimedia data is transferred from a server to the mobile TV, Internet TV, VoIP \n\nTranscoding does \nthe data adaptation, \nconversion, and change \n\nof protocol, format or \n\ncode \n\nDevice 1 \n\nDevice 2 \n\nDevice \n\n( i \u2013 1) \n\nDevice i \n\n10s of Bytes \n\n10s of Bytes \n\n10s of Bytes \n\n10s of Bytes \n\nPhysical/Data-link Layer \nData Adaptation Layer \n\nIP \n10s of Bytes \n\nManage \nConnections \n\nand \nSubscriptions \n\nDevice Register \n\nand Connect \n\nIoT \nCommunication \n\nFramework \n\n[1000s of Bytes] \n\nCoAP \n\n[Each data \ntransfers 100s \nof bytes to \nnetwork and \ntransport layers] \n\n1. Data Management \n\n2. Data Enrichment \n\nand Consolidation \n\n3. Transcoding \n\n4. Privacy \n\n5. Security \n\n6. Integration \n\nCompaction and \nFusion \n\n7. Device \n\nManagement \n\n\u2026\u2026\u2026 \n\n\u2026\u2026.. \n\nIoT \ndevices \nor M2M \n\nArea \nNetwork \n\nFigure 2.7 IoT or M2M gateway consisting of data enrichment and consolidation, device management \n\nand communication frameworks at the adaptation layer \n\n62 \nInternet of Things: Architecture and Design Principles \n\nphone or smartphone as the client devices. Transcoding applications also involve filtering, \ncompression or decompression. \n\nA transcoding proxy can execute itself on the client system or the application server. \nA transcoding proxy has conversion, computational and analysing capabilities, while a \ngateway has conversion and computational capabilities only. \n\nPrivacy \n\nData such as patient medical data, data for supplying goods in a company from and to \ndifferent locations, and changes in inventories, may need privacy and protection from \nconscious or unconscious transfer to untrustworthy destinations using the Internet. \n\nPrivacy is an aspect of data management and must be remembered while designing an \napplication. The design should ensure privacy by ensuring that the data at the receiving \nend is considered anonymous from an individual or company. \n\nFollowing are the components of the privacy model: \n\n\u25cf Devices and applications identity-management \n\n\u25cf Authentication \n\n\u25cf Authorisation \n\n\u25cf Trust \n\n\u25cf Reputation \nA suitable encryption of identification of data source enforces privacy. Device ID \nmanagement provides for privacy. The analysed decrypted data is an input to application, \nservice or process. IoT or M2M data have to be for the beneficiary individual person or \ncompany only. \n\nWhen data is transfered from one point to another, it should be ensured that the \nstakeholder in future may not misuse the device end data or the application data. These \nstatic and dynamic relationships are components which depend on trust and reputation. \n\nSecure Data Access \n\nAccess to data needs to be secure. The design ensures the authentication of a request for \ndata and authorisation for accessing a response or service. It may also include auditing of \nrequests and accesses of the responses for accountability in future. Example 2.4 described \nhow a layer provides the confidentiality and authorisation using AES-128 and CCM. \n\nEnd-to-end security is another aspect while implies using a security protocol at each \nlayer, physical, logical link and transport layers during communication at both ends in a \nnetwork. \n\nData Gathering and Enrichment \n\nIoT/M2M applications involve actions such as data-gathering (acquisition), validation, \nstorage, processing, reminiscence (retention) and analysis. \n\nDesign Principles for Connected Devices \n63 \n\nData gathering refers to data acquisition from the devices/devices network. Four modes of \ngathering data are: \n\n1. Polling refers to the data sought from a device by addressing the device; for example, \n\nwaste container filling information in a waste management system \n2. Event-based gathering refers to the data sought from the device on an event; for \n\nexample, when the device reaches near an access point or a card reaches near the \ncard reader or an initial data exchange for the setup of peer-to-peer or master-slave \nconnection of BT device using NFC \n3. Scheduled interval refers to the data sought from a device at select intervals; for \n\nexample, data for ambient light condition in Internet of streetlights \n4. Continuous monitoring refers to the data sought from a device continuously; for \n\nexample, data for traffic presence in a particular street ambient light condition in \nInternet of streetlights \n\nData enrichment refers to adding value, security and usability of the data. \n\nData Dissemination \n\nConsider the following three steps for data enrichment before the data disseminates to the \nnetwork as aggregation, compaction and fusion. \n\nAggregation refers to the process of joining together present and previously received \ndata frames after removing redundant or duplicate data. \n\nCompaction means making information short without changing the meaning or context; \nfor example, transmitting only the incremental data so that the information sent is short. \n\nFusion means formatting the information received in parts through various data frames \nand several types of data (or data from several sources), removing redundancy in the \nreceived data and presenting the formatted information created from the information \nparts. Data fusion is used in cases when the individual records are not required and/or \nare not retrievable later. \n\nEnergy Dissipation in Data Dissemination \n\nEnergy consumption for data dissemination is an important consideration in many devices \nin WPANs and in wireless sensor nodes (WSNs). This is due to limited battery life. Energy \nis consumed when performing computations and transmissions. Higher the data rate, the \ngreater will be the energy consumed. Higher is RF used, the greater will be the energy \nconsumed. Higher the gathering interval, the lower will be the energy consumed. \n\nEnergy efficient computations can be done by using concepts of data aggregation, \ncompaction and fusion. Lesser the data bytes communication, greater the acquisition \nintervals, and lower the data rate for data transfer, lesser the energy dissipation. \n\n64 \nInternet of Things: Architecture and Design Principles \n\nData Source and Data Destination \n\nID : Each device and each device resource is assigned an ID for specifying the data of \nsource and a separate ID for data destination. \nAddress : Header fields add the destination address (for example, 48-bit MAC address at \nLink layer, 32-bit IPv4 address at IP network and 128-bit IPv6 address at IPv6 network) \nand may also add the port (for example, port 80 for HTTP application). \n\nData Characteristics, Formats and Structures \n\nData characteristics can be in terms of temporal data (dependent on the time), spatial \ndata (dependent on location), real-time data (generated continuously and acquired \ncontinuously at the same pace), real-world data (from physical world for example, \ntraffic or streetlight, ambient condition), proprietary data (copy right data reserved for \ndistribution to authorised enterprises) and big data (unstructured voluminous data). \n\nData received from the devices, formats before transmission onto Internet. The  format \ncan be in XML, JSON and TLV (Section 3.1.3). A file can be MIME type for Internet (Section \n3.1.5). \n\nStructure implies the ways for arranging the data bytes in sequences with size limit = \nPDU for a layer. \n\n2.4.2 Device-management Gateway \n\nDevice Management (DM) means provisioning for the device ID or address which is \ndistinct from other resources, device activating, configuring (managing device parameters \nand settings), registering, deregistering, attaching and  detaching. \n\nDevice management also means accepting subscription for its resources. Device fault \nmanagement means course of actions and guidelines to be followed in case if a fault \ndevelops in the device. \n\nOpen Mobile Alliance (OMA)-DM and several standards are used for device management. \nOMA-DM model suggests the use of a DM server which interacts with devices through \na gateway in case of IoT/M2M applications. A DM server is a server for assigning the \ndevice ID or address, activating, configuring (managing device parameters and settings), \nsubscribing to device services or opting out of device services and configuring device \nmodes. A device instead of a DM server, communicates to a gateway in case of low-power \nloss environment. \n\nGateway functions for device management are: \n\n\u25cf Does forwarding function when the DM server and device \ncan interact without reformatting or structuring \n\n\u25cf Does protocol conversion when the device and DM server \nuse distinct protocols \n\n\u25cf Does proxy function in case an intermediate pre-fetch is required in a lossy environment \nor network environment needs. \n\nOMA DM model for \n\nusing a DM server \n\nDesign Principles for Connected Devices \n65 \n\nReconfirm Your Understanding \n\n\u25cf Data communication between personal/local area network of devices and a gateway for communicating \nvia Internet. \n\n\u25cf Gateway enables data enrichment and consolidation and device management. \n\n\u25cf Data management functions at the gateway are transcoding, data privacy, data security, data \nenrichment, data consolidation, transformation and device management. \n\n\u25cf Transcoding means adaptations, conversions, changes of protocol or format using software which \nrenders the web response/messages in formats/representations as required and acceptable at the IoT \ndevice and rendering requests for messages in formats/representations as required and acceptable \nat the server. \n\n\u25cf Data acquires and transfers to other end at scheduled intervals, on an event, or on polling. \n\n\u25cf Data aggregation, compaction and fusion save energy during data dissemination. \n\n\u25cf Data destinations may use the 48-bit MAC address, 32-bit IPv4 address, 48-bit IPv6 address or port \nnumber during communication at the data-link or network layers. \n\n\u25cf Each device and application has an ID or address of communication source and each destination has \nan ID or address. Communication between the end points and between the layers is secure when \nusing the authentication and authorisation processes. \n\n\u25cf Device management functions are the device ID or address, activation, configuring (managing device \nparameters and settings), registering, deregistering, attaching, detaching and fault management. \n\n\u25cf Gateway functions for device management are\u2014forwarding function between DM server and device; \nprotocol conversion when device and DM server use distinct protocols and proxy function. \n\n\u25cf Communication gateway enables protocol conversion between two ends. \n\nS elf-Assessment E xercise \n\n1. List the functions at the data-adaptation layer. \n2. What are the transcoding functions required at data-adaptation layer gateway? \n3. What are the functions used in designing for data privacy of the connected \n\ndevices? \n4. What are the four modes for gathering data? \n5. Give examples of steps of aggregation, compaction and fusion of data before \n\ndissemination of data. \n6. Where is the device ID, MAC address, IP address, IPv6 address and port \n\nnumber used for data destination? \n7. List six characteristics of data of devices, which communicate to the Internet \n\nfor applications, services and business processes. \n8. How is energy saved at a device when acquiring data? \n9. List the functions of device management. \n10. What are the device management functions for end device, coordinator, router \n\nand IP router when using ZigBee IP based WPAN devices? \n\n\u2605 \n\u2605\u2605 \n\u2605\u2605 \n\n\u2605 \n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605\u2605\u2605 \n\n\n![Image](/src/assets/generated_images/iot2_p92_i0.png)\n66 \nInternet of Things: Architecture and Design Principles \n\n2.5 \nEASE OF DESIGNING AND \nAFFORDABILITY \n\nDesign for connected devices for IoT applications, services \nand business processes considers the ease in designing the \ndevices\u2019 physical, data-link, adaption and gateway layer. \n\nIt means availability of SDKs (software development kits), prototype development \nboards with smart sensors, actuators, controllers and IoT devices which are low in cost \nand hardware which embeds and are preferably open source software components and \nprotocols. Hardware which includes the device should embed minimum number of \ncomponents and use ready solutions for ease in designing local devices personal area \nnetwork and secure connectivity with the Internet. \n\nDesigning also considers ease as well as affordances for example, RFID or card. The \ncard has an embedded microcontroller, memory, OS, NFC peripheral interfaces, access \npoint-based device activation, RF module and transceiver at low cost. \n\nA wireless sensor uses, for example, a mobile terminal (Mote) which is a low cost device \nwith an open-source OS (tiny OS) and software components. Usages of Motes provide \nease and affordance in a WSN network. \n\nDevices of smart homes and cities use ZigBee IP or BT LE 4.2 (dual mode or single \nmode) due to their affordability, ease of designing, usage and low cost. \n\nA design may add to the complexity. For example, consider the umbrella in Example \n1.1. How will the umbrella be programmed to schedule the SMSes for a user? The need \nto use an instruction manual adds to the complexity of designing Internet of umbrellas. \n\nConnected devices may add complexity in the form ensuring data transfer to trusted \ndestinations using encryption tools. \n\nDiscuss ease of \n\ndesigning and \naffordability of IoT \n\ndevices \n\nLO 2.4 \n\nReconfirm Your Understanding \n\n\u25cf Ease of designing and affordability are important considerations for devices and applications, \nservices and processes for IoTs. \n\nS elf-Assessment E xercise \n\n1. What do the terms \u2018ease\u2019 and \u2018affordability\u2019 mean? \n2. How does the use of connected devices add complexity as compared to \n\nunconnected devices? \n\n\u2605 \n\u2605\u2605 \n\nDesign Principles for Connected Devices \n67 \n\nKey Concepts \n\n\u25cf AES-CCM 128 bit \n\n\u25cf Affordability of design \n\n\u25cf Bluetooth low energy \n\n\u25cf Data adaptation layer \n\n\u25cf Data aggregation \n\n\u25cf Data compaction \n\n\u25cf Data dissemination \n\n\u25cf Data formatting \n\n\u25cf Data fusion \n\n\u25cf Data integrity \n\n\u25cf Data privacy \n\n\u25cf Data processing \n\n\u25cf Data security \n\n\u25cf Data trust \n\n\u25cf Device configuration \n\n\u25cf Device fault management \n\n\u25cf Device management \n\n\u25cf Device, and application and \nnetwork domains \n\n\u25cf DM server \n\n\u25cf Ease of designing \n\n\u25cf ETSI high level reference \narchitecture \n\n\u25cf Gateway \n\n\u25cf GPR/GSM/UMTS/LTE \n\n\u25cf I2C \n\n\u25cf IETF six layer model \n\n\u25cf ITU-T four layer reference \nmodel \n\n\u25cf Mobile internet \n\n\u25cf NFC \n\n\u25cf Physical/data-link layer \n\n\u25cf RF module \n\n\u25cf RFID \n\n\u25cf SPI \n\n\u25cf Transcoding \n\n\u25cf UART \n\n\u25cf USB \n\n\u25cf Wireless personal area \nnetwork \n\n\u25cf Wireless USB \n\n\u25cf WLAN 802.11 \n\n\u25cf ZigBee IP \n\nLearning Outcomes \n\nLO 2.1 \n\n\u25cf IETF standards organisation proposed for the IoT/M2M, a modified Open Systems \nInterconnection (OSI) model, which consists of six layers, introduces physical cum data-link \nlayer, data-adaptation layer and application-support layer. \n\n\u25cf ITU-T standards organisation proposed four layers for IoT/M2M reference mode: Device, \nnetwork, services and application-support and application layers. \n\n\u25cf ETSI standards organisation proposes two domains for M2M: Device and application and \nnetwork domains. ETSI high-level architecture provides that device-domain communicates \nwith M2M applications and services through the CoRE network and access network. \n\nLO 2.2 \n\n\u25cf Wireless devices physical/data-link layer protocols for IoT/M2M designing are: \n\ns NFC (10\u201320 cm; data transfer rates 106 kbps, 212 kbps, 424 kbps and 848 kbps) \n\ns RFIDs \n\ns BT LE (low power dissipation, short frames, peer-to-peer star topology network and \n\n1 Mbps data transfer rates) \n\ns ZigBee IP (low power dissipation, 127 B data frames, communicate on Internet using \n\n6LoWPAN, IPv6, RPL/ND and TLSv1.2) \n\ns WLAN 802.11 (Wi-Fi) (high data transfer rates, mobility, flexible, reliability and scalable \n\nnetwork. Interoperability with wireless as well as wired infrastructure) \n\ns Mobile GPRS/GSM/UMTS/LTE/WiMax \n\ns Wireless USB (UWB (ultra wide band) for short-range personal area network, high speed \n\nwireless communication \n\n\u25cf IoT/M2M wired devices physical layer protocols are UART, SPI, I2C, Ethernet and USB bus \ntopology serial communication protocols. \n\n68 \nInternet of Things: Architecture and Design Principles \n\nLO 2.3 \n\n\u25cf A gateway exists between personal/local area network of devices and the Internet. Gateway \nenables data enrichment and consolidation and device management. \n\n\u25cf Data management functions at the gateway are data privacy, data security, data enrichment, \ndata consolidation, transformation and device management. \n\n\u25cf Privacy model components are: \n\ns Device and applications identities-management \n\ns Authentication \n\ns Authorisation \n\ns Trust \n\ns Reputation \n\n\u25cf A communication gateway enables protocol conversion between two domains: Devices and \ngateway domain, and network and application domain. \n\n\u25cf Device management functions are assigning each device ID or address, device activation, \nconfiguring (managing device parameters and settings), registering, deregistering, attaching, \ndetaching, subscription and fault management. \n\n\u25cf The OMA-DM model suggests the use of a DM server interacting with devices through a \ngateway. \n\nLO 2.4 \n\n\u25cf IoT applications, services and business process design consider the ease and affordability in \ndesigning the devices physical, data-link, adaptation layer, gateway and Internet connectivity. \nA design should add minimum complexities. \n\nExercises \n\nObjective Questions \n\nSelect one correct option out of the four in each question. \n\n1. IETF OSI six-layer model for the IoT proposes the followings layers: (i) physical layer \n\n(ii) physical/data link layer (iii) logical link layer (iv) adaptation layer (v) gateway \nlayer (vi) network layer (vii) UDP layer (viii) transport layer (ix) application layer as \nhighest layer and then application-support layer (x) application-support layer as the \nhighest layer and then application layer. \n(a) All layers except (i), (iii), (v), (vii) and (x) true \n(b) All layers except (ii), (v), (vii) and (ix) true \n\n(c) All layers except (ii), (iii), (iv), (viii) and (ix) true \n(d) All layers except (ii), (iv), (v), (vii) and (ix) true \n2. The ITU-T reference model proposes (i) four layers (ii) lowest layer as the device layer \n\nhas device and gateway capabilities, (iii) next layer to the device layer has transport \nand network capabilities, (iv) the next layer above is the services and application- \nsupport layer, and (v) generic and specific service capabilities layer. \n(a) (i) is incorrect \n(b) Model layers are (ii) to (v) and (i) is true \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\nDesign Principles for Connected Devices \n69 \n\n(c) Layers are (ii), (iii) and , (iv) and applications and services layer, and (v) is not a \n\nseparate layer \n(d) (ii) to (v) incorrect \n3. The ETSI high-level architecture proposes: \n\n(a) a device and gateway domain and the gateway has M2M service capabilities \n(b) a device and gateway domain, and the device domain has an M2M area network \n\nand M2M devices \n(c) a device, application and services domain which has M2M service capabilities, \n\napplications and M2M Devices \n(d) a device and gateway domain, and the gateway has M2M service capabilities, \n\napplications, M2M area network and M2M devices \n4. NFC devices function as follows: (i) communicate within distances up to 10 m to \n\n20 m, (ii) NFC device can also communicate with BT and Wi-Fi (iii) NFC device is \nable to receive and pass the data to a BT connection or a standardised LAN or Wi-Fi \nusing information handover functions, (iv) communicate with data transfer rates 128 \nkbps, 512 kbps and 640 kbps. \n(a) (i) and (iv) true \n(b) (i) and (iv) not true \n\n(c) (i),(ii) and (iv) true \n(d) All are true \n5. Bluetooth v4.2 LE mode is (i) IETE 802.15.4 protocol, (ii) supports 1 Mbps data \n\nrate, (iii) support to NFC pairing for low latency in pairing the BT devices, \n(iv) auto-synchronisation between mobile and other devices when both use BT \n(iv) range depends on radio class and can be 100 m, 10 m or 1 m used in device \nBT implementation, (v) forms mesh topology network (vi) frame size from device is \n127 B (vi) inter-piconet communication between piconets to get bigger range network \nof 100-150 cm range (called scatter net) \n[LO 2.2] \n(a) (iii) and (vi) not true \n(b) All are true \n\n(c) (ii), (v) and (vi) not true \n(d) (i), (v) and (vi) not true \n6. ZigBee IP device communicate (i) using IETE 802.15.4 protocol, (ii) supports 2.4 GHz \n\nand different country specific ISM frequency bands, (iii) support to data routing and \nIP border routing, (iv) support IPv6 network with 6LoWPAN header, (v) forms mesh \ntopology network using ZigBee router (vi) using end device and five other modes of \nnetworking (viii) provides link level security using AES-CCM-128. \n(a) All are true \n(b) All except (ii) and (v) correct \n\n(c) All except (iii) \n(d) All except (iii) true \n7. Wi-Fi network (i) use generally 2.4 GHz or 915 GHz (ii) 802.11a or 802.11g or 802.11n \n\nor other 802.11 series protocols, (iii) mobility and roaming, (iv) has easy installation \nsimplicity and flexibility, (v) coverage ranges 300 m to 425 m and data rate is 11 Mbps \nwithin 300 m (vi) scalability \n(a) All are true \n(b) All except (ii) and (v) correct \n\n\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n70 \nInternet of Things: Architecture and Design Principles \n\n(c) All except (i) and (v) \n(d) All except (iii) and (vi) true \n8. Asynchronous communication characteristics are each set of bytes that (i) can have \n\nvariation in time interval spacing or phase differences between successive bytes \nand in-between wait interval, (ii) should have fixed time interval spacing or phase \ndifference, (iii) Tx and Rx does not synchronise their internal clocks at transmitter \nand receiver, (iv) Rx clock frequency can be higher or lower than that of Tx during \nserial communication, (v) Tx end can wait for acknowledgement or response from Rx \nend before a new set of bytes transmit. All are true: \n(a) except (ii) and (iv) \n(b) except (ii) and (v) \n\n(c) except (i) and (iii) \n(d) except (iii) and (vi) \n9. SPI (i) at the device uses serial synchronous communication to another device, \n\n(ii) one of the device function as a master at an instant, (iii) master means one \nwhich synchronises its clock with another device, (iv) slave is a receiver of the serial \nsynchronous output and synchronizing clock information from master, (v) two set of \nsignals are MISO and MOSI. All are true: \n(a) except (iii) \n(b) (i) and (v) \n\n(c) except (iii) and (iv) \n(d) except (ii) \n10. Ethernet (i) uses 48-bit MAC addresses assigned distinctly to each computer network \n\ncard on the LAN, (ii) uses reverse Address Resolution Protocol (RARP) to MAC \naddress into 32 bit IP addresses for Internet, (iii) uses wired bus topology (iv) data \nrates are 10/100 Mbps, 1 Gbps (high-quality coaxial cable), (v) uses MAC based on \nCSMA/CA (Carrier Sense Multiple Access with Collision Avoidance). All are true: \n(a) none is false \n(b) all except (i) and (iv) correct \n\n(c) except (v) \n(d) except (ii) and (v) true \n11. USB (i) host connects up to 256 devices, (ii) has no provisions for the polling \n\nmode functions, (iii) three standards are USB 1.1 (1.5 and 12 Mbps), 2.0 (mini size \nconnector) 480 Mbps, 3.0 (micro size connector) 10 Gbps and 3.1 (wireless 10 Gbps), \n(iv) communication is asynchronous serial, (v) device is a plug and play device. All \nare incorrect: \n(a) except (ii) \n(b) except (ii) and (v) \n\n(c) except (v) \n(d) except (iii) and (iv) \n12. Transcoding means one or more of the following functions: (i) adaptations, (ii) \n\nconversions, (iii) changes using software which render the web response and \nmessages in formats and representations required and acceptable at an IoT device, \n(iv) adapting IoT device requests and convert and change into required formats \nacceptable at the server by transcoding software. All are true: \n\n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\nDesign Principles for Connected Devices \n71 \n\n(a) except (i) and (iv) \n(b) none false \n\n(c) except (iii) and (iv) \n(d) except (ii) \n13. Device management functions include (i) assigning a device ID or address, \n\n(ii) activation, (iii) proxy setting, (iv) gateway actions, (v) configuring, (vi) changing \ndevice parameters, (vii) adapting device parameters to permitted values, (viii) registering, \n(ix) deregistering, (x) attaching, (xi) detaching \n(a) All are true except (vi) \n(b) (iii), (iv) and (vi) not true \n\n(c) All except (x) and (xi) true \n(d) All except (iv) and (vi) true \n14. IoT data characteristics can be (i) temporal data, (ii) spatial data, (iii) real-time data, \n\n(iv) real-world data, (v) proprietary data, (vi) big data, (vii) random data \n(a) All are true \n(b) All except (v) are true \n\n(c) All except (i) and (vii) are true \n(d) All except (vii) are true \n15. Suggested privacy model depends on the following components: (i) trust, (ii) device \n\nand applications identities-management, (iii) authentication, (iv) authorisation, \n(vi) reputation \n(a) All except (vi) are true \n(b) All except (ii)are true \n\n(c) All except (i) and (vi) are true \n(d) All true \n16. Data enrichment before the data disseminates to the network means (i) aggregation, \n\n(ii) compaction, (iii) fusion, (iv) adjusting data rate within the permitted limit, \n(v) communication as per protocol standards, (vi) formatting as per protocol \nspecifications \n(a) All are true \n(b) All except (iv) and (v) are true \n\n(c) All except (iii) and (v) are true \n(d) (i) to (iii) true \n\nShort-Answer Questions \n\n1. What are the modifications in OSI model for IoT? \n[LO 2.1] \n2. Show a comparison between OSI layers and IUT-T reference model layers. \n[LO 2.1] \n3. What are the features of ETSI high-level architecture? \n[LO 2.1] \n4. Explain meaning of active, passive and card devices. \n[LO 2.2] \n5. How does a passive device communicate on the Internet? \n[LO 2.2] \n6. What are the WPAN and network protocol functions which can be used \n\nfor Internet of RFIDs? \n[LO 2.2] \n7. Compare the features of BT LE device with BT BR/EDR device mode? \n[LO 2.2] \n8. Write the modes and data rates of ZigBee IP devices. \n[LO 2.2] \n9. How is the ZigBee IP used in Internet of streetlights? \n[LO 2.2] \n10. How does the local device M2M network connect to WiFi and the Internet? [LO 2.2] \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605\u2605 \n\u2605\u2605 \n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605\u2605\u2605 \n\n\u2605 \n\n72 \nInternet of Things: Architecture and Design Principles \n\n11. What are the features of serial synchronous and serial asynchronous communication \n\nin a wired device network? \n[LO 2.2] \n12. Why is data adaptation layer must for connected devices for an IoT? \n[LO 2.3] \n13. Why is a gateway needed for networking? \n[LO 2.3] \n14. How does a chain of ATMs connect to a bank server? \n[LO 2.3] \n15. Why are both data privacy components and provisioning of end-to-end security \n\nimportant in IoT? \n[LO 2.3] \n16. How will you design a lamppost WSN with ease and affordability for Internet of \n\nstreetlights services (Example 1.2)? \n[LO 2.4] \n\nReview Questions \n\n1. Describe IETF proposed six-layer model for IoT. How does the IoT model relate to the \n\nOSI seven-layer model for computer networks? \n[ LO 2.1 ] \n2. Describe four layers of reference model and the  layer capabilities. \n[ LO 2.1] \n3. Draw ETSI M2M domains and high-level architecture. List the capabilities and \n\nfunctions of each domain. \n[ LO 2.1 ] \n4. What are the features of NFC? How does a device using NFC transfer information to \n\nBluetooth or Wi-Fi interfaces and to the Internet? \n[ LO 2.2 ] \n5. Describe and list the protocol features in Bluetooth v 4.2 BR/EDR and low-energy \n\nmodes. How does a BT device connect to Wi-Fi? \n[LO 2.2] \n6. How do ZigBee end point devices form a WPAN of embedded sensors, actuators, \n\nappliances, controllers or medical data systems, and how do they connect to \napplication layer services, business processes and service? \n[ LO 2.2 ] \n7. How do Wi-Fi interfaces connect within themselves or to an access point or wireless \n\nrouter? How does Wi-Fi enable interconnecting through a modem and then to the \nInternet service provider? \n[ LO 2.2 ] \n8. Explain RF circuits, the actions using active duty cycle and modulation and transceiver \n\nactions. How does an RF circuit connect to Bluetooth, ZigBee or Wi-Fi radios using \nISM band transceivers? \n[ LO 2.2 ] \n9. Describe protocol layers of BT LE and ZigBee IP. \n[ LO 2.2 ] \n10. Explain RF circuit components. What are the actions during active duty cycle, and by \n\nmodulator and transceiver? \n[ LO 2.2 ] \n11. What are the features of Ethernet IEEE 802.2 that enable wired LAN communication \n\nbetween the computers? \n12. Explain UART and I2C bus interfaces. When and where are these interfaces used? \n\n[ LO 2.2 ] \n13. Compare I2C, SPI bus topologies. When and where are these interfaces used? \n\n[ LO 2.2 ] \n14. Describe adaptation layer gateway, data enrichment, data consolidation and device \n\nmanagement functions. \n[LO 2.3 ] \n15. Why are device management functions required? \n[LO 2.3 ] \n16. Explain how to design with  ease and affordability for local area network of M2M \n\ndevices. \n[LO 2.4] \n\n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605 \n\u2605\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\u2605\u2605 \n\nDesign Principles for Connected Devices \n73 \n\nPractice Exercises \n\n1. Show three conceptual designs using IETF model layers, ITU-T reference model layers \n\nand ETSI domains high-level reference architecture for Internet of ATMs applications \nand services. \n[LO 2.1] \n2. Show three conceptual designs using IETF model layers, ITU-T reference model \n\nlayers and ETSI domains high-level reference architecture for a waste container \nmanagement service in a smart city. \n[LO 2.1] \n3. Draw and show how a Bluetooth network will connect for Internet applications and \n\nservices. \n[LO 2.2] \n4. Draw and show how a cellular network will connect to a ZigBee mesh network. \n\n[LO 2.2] \n5. How is mobile Internet used in IoT and M2M applications? \n[LO 2.2] \n6. Make charts to show connected devices using NFC, BL LE, ZigBee IP for IoT \n\napplications and services? \n[LO 2.2] \n7. How will a network be used with features of privacy, security, data formatting, data \n\ndestinations and source addresses, aggregation, data fusion, data compaction and \nminimum energy dissipation? \n[LO 2.3] \n8. Find the ease and affordable hardware for streetlight lamppost connectivity with \n\nneighbouring lamppost.  Hardware uses the sensors for ambient light, faulty lighting \nfunction and traffic, microcontroller, memory, BL LE connectivity and data adaption. \nWhen connecting to a group controller, what will be the addition hardware and \nsoftware? \n[LO 2.4] \n\n\u2605\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605 \n\n\u2605\u2605 \n\n\u2605 \n\n\u2605\u2605\u2605 \n\n\u2605\u2605\u2605 \n\n",
  "createdAt": "2026-02-17"
}